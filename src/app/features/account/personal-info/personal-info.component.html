<div class="personal-info-container">
  <div *ngIf="successMessage" class="success-message">
    {{ successMessage }}
  </div>
  
  <div *ngIf="errorMessage" class="error-message">
    {{ errorMessage }}
  </div>
  
  <form [formGroup]="personalForm" (ngSubmit)="onSubmit()">
    <div class="photo-upload-section">
      <div class="avatar-preview">
        <img [src]="selectedPhotoURL || user.photoURL || 'assets/images/default-avatar.png'" [alt]="user.username">
      </div>
      
      <div class="upload-controls">
        <label for="profile-photo" class="upload-btn">
          <i class="icon-upload"></i>
          Tải ảnh lên
        </label>
        <input 
          type="file" 
          id="profile-photo" 
          accept="image/*" 
          (change)="onFileSelected($event)" 
          style="display: none;"
        >
        
        <button 
          type="button" 
          class="clear-btn" 
          *ngIf="selectedPhotoURL" 
          (click)="clearSelectedPhoto()"
        >
          <i class="icon-clear"></i>
          Xóa ảnh đã chọn
        </button>
        
        <p class="upload-hint">Hỗ trợ JPG, PNG. Kích thước tối đa 2MB.</p>
      </div>
    </div>
    
    <div class="form-divider">Thông tin cơ bản</div>
    
    <div class="form-group">
      <label for="fullName">Họ và tên</label>
      <input 
        type="text" 
        id="fullName" 
        formControlName="fullName" 
        placeholder="Nhập họ và tên"
      >
    </div>
    
    <div class="form-row">
      <div class="form-group">
        <label for="birthDate">Ngày sinh</label>
        <input 
          type="date" 
          id="birthDate" 
          formControlName="birthDate"
        >
      </div>
      
      <div class="form-group">
        <label for="gender">Giới tính</label>
        <select id="gender" formControlName="gender">
          <option value="">-- Chọn giới tính --</option>
          <option value="male">Nam</option>
          <option value="female">Nữ</option>
          <option value="other">Khác</option>
        </select>
      </div>
    </div>
    
    <div class="form-divider">Liên kết mạng xã hội</div>
    
    <div class="form-group">
      <label for="facebookUrl">Facebook</label>
      <div class="input-with-icon">
        <i class="icon-facebook"></i>
        <input 
          type="url" 
          id="facebookUrl" 
          formControlName="facebookUrl" 
          placeholder="URL trang Facebook của bạn"
        >
      </div>
    </div>
    
    <div class="form-group">
      <label for="youtubeUrl">YouTube</label>
      <div class="input-with-icon">
        <i class="icon-youtube"></i>
        <input 
          type="url" 
          id="youtubeUrl" 
          formControlName="youtubeUrl" 
          placeholder="URL kênh YouTube của bạn"
        >
      </div>
    </div>
    
    <div class="form-group">
      <label for="twitterUrl">Twitter</label>
      <div class="input-with-icon">
        <i class="icon-twitter"></i>
        <input 
          type="url" 
          id="twitterUrl" 
          formControlName="twitterUrl" 
          placeholder="URL trang Twitter của bạn"
        >
      </div>
    </div>
    
    <div class="form-group">
      <label for="instagramUrl">Instagram</label>
      <div class="input-with-icon">
        <i class="icon-instagram"></i>
        <input 
          type="url" 
          id="instagramUrl" 
          formControlName="instagramUrl" 
          placeholder="URL trang Instagram của bạn"
        >
      </div>
    </div>
    
    <div class="form-actions">
      <button type="submit" class="save-btn" [disabled]="isSubmitting">
        <span *ngIf="!isSubmitting">Lưu thay đổi</span>
        <span *ngIf="isSubmitting">Đang lưu...</span>
      </button>
    </div>
  </form>
</div>
